"use strict";(self.webpackChunkspotify_back=self.webpackChunkspotify_back||[]).push([[871],{835:(t,e,a)=>{a.d(e,{Z:()=>o});a(791);var r=a(184);const o=()=>(0,r.jsx)("div",{className:"loader-container",children:(0,r.jsx)("div",{className:"loader"})})},183:(t,e,a)=>{a.d(e,{E:()=>o});const r="http://ec2-35-180-230-197.eu-west-3.compute.amazonaws.com:4000/api/",o={getAudios:async()=>{const t="".concat(r,"audio"),e=await fetch(t);if(!e.ok)throw new Error("Erreur lors du chargement des audios");return await e.json()},getSingleAudio:async t=>{const e=await fetch("".concat(r,"audio/").concat(t));if(!e.ok)throw new Error("Erreur lors de la r\xe9cup\xe9ration de l\u2019audio");return await e.json()},editAudio:async(t,e)=>{const a=localStorage.getItem("userToken"),o=await fetch("".concat(r,"audio/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(e)});if(!o.ok)throw new Error("Erreur lors de la modification de l\u2019audio");return await o.json()},uploadAudio:async t=>{const e=localStorage.getItem("userToken"),a=new FormData;a.append("audioFile",t);const o=await fetch("".concat(r,"audio/upload"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:a});if(!o.ok)throw new Error("Erreur lors de l\u2019upload de l\u2019audio");return await o.json()},deleteAudio:async t=>{const e=localStorage.getItem("userToken"),a=await fetch("".concat(r,"audio/").concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}});if(!a.ok)throw new Error("Erreur lors de la suppression de l\u2019audio");return await a.json()},streamAudio:async t=>{const e=await fetch("".concat(r,"audio/stream/").concat(t));if(!e.ok)throw new Error("Erreur lors du streaming de l\u2019audio");return await e.json()},getStreamingCount:async t=>{const e=await fetch("".concat(r,"audio/streamed/").concat(t));if(!e.ok)throw new Error("Erreur lors de la r\xe9cup\xe9ration du nombre de stream");return await e.json()},getArtists:async()=>{const t=await fetch("".concat(r,"artist"));if(!t.ok)throw new Error("Erreur lors du chargement des artistes");return await t.json()},getLastArtist:async()=>{const t=await fetch("".concat(r,"artist/last"));return await t.json()},getSingleArtist:async t=>{const e=await fetch("".concat(r,"artist/").concat(t));if(!e.ok)throw new Error("Erreur lors de la r\xe9cup\xe9ration de l\u2019artiste");return await e.json()},editArtist:async t=>{const e=localStorage.getItem("userToken"),a=t.id,o=await fetch("".concat(r,"artist/").concat(a),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(t)});if(!o.ok)throw new Error("Erreur lors de la modification de l\u2019artiste");return await o.json()},createArtist:async t=>{const e=localStorage.getItem("userToken"),a=await fetch("".concat(r,"artist"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(t)});if(!a.ok)throw new Error("Erreur lors de la cr\xe9ation de l\u2019artiste");return await a.json()},deleteArtist:async t=>{const e=localStorage.getItem("userToken"),a=await fetch("".concat(r,"artist/").concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}});if(!a.ok)throw new Error("Erreur lors de la suppression de l\u2019artiste");return await a.json()},getAlbums:async()=>{const t=await fetch("".concat(r,"album"));if(!t.ok)throw new Error("Erreur lors du chargement des albums");return await t.json()},getAllAlbums:async()=>{const t=await fetch("".concat(r,"album/all"));if(!t.ok)throw new Error("Erreur lors du chargement des albums");return await t.json()},getSingleAlbum:async t=>{const e=await fetch("".concat(r,"album/").concat(t));if(!e.ok)throw new Error("Erreur lors de la r\xe9cup\xe9ration de l\u2019album");return await e.json()},editAlbum:async(t,e)=>{const a=new FormData;a.append("title",e.title),a.append("artist",e.artistId),a.append("releaseDate",e.releaseDate),a.append("genre",e.genre),e.picture&&e.picture instanceof File&&a.append("albumImage",e.picture);const o=await fetch("".concat(r,"album/").concat(t),{method:"PUT",headers:{Authorization:"Bearer ".concat(token)},body:a});if(!o.ok)throw new Error("Erreur lors de la modification de l\u2019album");return await o.json()},createAlbum:async t=>{console.log(t);const e=await fetch("".concat(r,"album"),{method:"POST",headers:{Authorization:"Bearer ".concat(token)},body:t});if(!e.ok)throw new Error("Erreur lors de la cr\xe9ation de l\u2019album");return await e.json()},deleteAlbum:async t=>{const e=localStorage.getItem("userToken"),a=await fetch("".concat(r,"album/").concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}});if(!a.ok)throw new Error("Erreur lors de la suppression de l\u2019album");return await a.json()},getAdmins:async()=>{const t=localStorage.getItem("userToken"),e=await fetch("".concat(r,"admin"),{headers:{Authorization:"Bearer ".concat(t)}});if(!e.ok)throw new Error("Erreur lors de la r\xe9cup\xe9ration des donn\xe9es des administrateurs");return await e.json()},getSingleAdmin:async t=>{const e=localStorage.getItem("userToken"),a=await fetch("".concat(r,"admin/").concat(t),{headers:{Authorization:"Bearer ".concat(e)}});if(!a.ok)throw new Error("Erreur lors de la r\xe9cup\xe9ration des donn\xe9es de l\u2019administrateur");return await a.json()},addAdmin:async t=>{const e=localStorage.getItem("userToken"),a=await fetch("".concat(r,"admin"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(t)});if(!a.ok)throw new Error("Erreur lors de l\u2019ajout de l\u2019administrateur");return await a.json()},editAdmin:async(t,e)=>{const a=localStorage.getItem("userToken"),o=await fetch("".concat(r,"admin/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(e)});if(!o.ok)throw new Error("Erreur lors de la mise \xe0 jour de l\u2019administrateur");return await o.json()},deleteAdmin:async t=>{const e=localStorage.getItem("userToken"),a=await fetch("".concat(r,"admin/").concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}});if(!a.ok)throw new Error("Erreur lors de la suppression de l\u2019administrateur");return await a.json()}}},144:(t,e,a)=>{a.d(e,{Fk:()=>d,OX:()=>o,aS:()=>n,fC:()=>c,rU:()=>u,xD:()=>s,xY:()=>i});const r=()=>new Promise(((t,e)=>{const a=indexedDB.open("MyDatabase",1);a.onupgradeneeded=t=>{const e=t.target.result;e.createObjectStore("audios",{keyPath:"id"}),e.createObjectStore("artists",{keyPath:"id"}),e.createObjectStore("albums",{keyPath:"id"})},a.onerror=t=>{e("Database error: ".concat(t.target.errorCode))},a.onsuccess=e=>{t(e.target.result)}})),o=async t=>{const e=(await r()).transaction("audios","readwrite").objectStore("audios");for(let a of t)e.put(a)},n=async()=>{const t=(await r()).transaction("audios","readonly").objectStore("audios");return new Promise(((e,a)=>{const r=t.getAll();r.onerror=()=>{a("Failed to retrieve data from database.")},r.onsuccess=()=>{e(r.result)}}))},s=async t=>{const e=(await r()).transaction("artists","readwrite").objectStore("artists");for(let a of t)e.put(a)},c=async()=>{const t=(await r()).transaction("artists","readonly").objectStore("artists");return new Promise(((e,a)=>{const r=t.getAll();r.onerror=()=>{a("Failed to retrieve data from database.")},r.onsuccess=()=>{e(r.result)}}))},i=async t=>{(await r()).transaction("artists","readwrite").objectStore("artists").add(t)},d=async t=>{const e=(await r()).transaction("albums","readwrite").objectStore("albums");for(let a of t)e.put(a)},u=async()=>{const t=(await r()).transaction("albums","readonly").objectStore("albums");return new Promise(((e,a)=>{const r=t.getAll();r.onerror=()=>{a("Failed to retrieve data from database.")},r.onsuccess=()=>{e(r.result)}}))}},871:(t,e,a)=>{a.r(e),a.d(e,{default:()=>u});var r=a(791),o=a(183),n=a(144),s=(a(418),a(835)),c=a(184);const i=(0,r.lazy)((()=>a.e(62).then(a.bind(a,927)))),d=async t=>({id:t._id,title:t.name}),u=()=>{const[t,e]=(0,r.useState)([]),[a,u]=(0,r.useState)(!0);return(0,r.useEffect)((()=>{(async()=>{u(!0);try{let t=await(0,n.fC)();if(!t.length){const e=await o.E.getArtists(),a=await Promise.all(e.map(d));await(0,n.xD)(a),t=a}e(t)}catch(t){console.error(t)}finally{u(!1)}})()}),[]),(0,c.jsxs)("div",{className:"dashboard-list-view ",children:[(0,c.jsx)("h2",{children:"Artist Dashboard"}),a?(0,c.jsx)(s.Z,{}):(0,c.jsx)(i,{items:t,type:"artist"})]})}}}]);
//# sourceMappingURL=871.cd23f1ce.chunk.js.map