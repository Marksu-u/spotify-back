"use strict";(self.webpackChunkspotify_back=self.webpackChunkspotify_back||[]).push([[54],{54:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var l=a(791),n=a(183),s=a(835),i=a(184);const r=(0,l.lazy)((()=>Promise.resolve().then(a.bind(a,437)))),o=(0,l.lazy)((()=>Promise.resolve().then(a.bind(a,321)))),u=(0,l.lazy)((()=>a.e(457).then(a.bind(a,457)))),c=e=>{let{isOpen:t,onClose:a,data:c,onSubmit:d,type:m,actionType:b}=e;const[h,p]=(0,l.useState)("add"===b?{}:c),[g,x]=(0,l.useState)([]),[j,v]=(0,l.useState)([]);(0,l.useEffect)((()=>{if("delete"!==b){const e=async()=>{try{const e=(await n.E.getAlbums()).map((e=>({id:e._id,title:e.title})));v(e)}catch(e){console.error(e)}};(async()=>{try{const e=(await n.E.getArtists()).map((e=>({id:e._id,title:e.name})));x(e)}catch(e){console.error(e)}})(),e(),p(c)}}),[c,b]);const f=e=>{const{name:t,value:a}=e.target;p({...h,[t]:a})},y=e=>{const{name:t,files:a}=e.target;a&&a[0]?p((e=>({...e,[t]:a[0]}))):p((e=>({...e,[t]:null})))};return t?(0,i.jsx)(l.Suspense,{fallback:(0,i.jsx)(s.Z,{}),children:(0,i.jsx)("div",{className:"modal-backdrop",children:(0,i.jsx)("div",{className:"modal-content",children:(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),d(h)},children:[(()=>{if("delete"===b)return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("p",{children:"\xcates-vous s\xfbr de vouloir supprimer cet \xe9l\xe9ment ?"})});switch(console.log(h),m){case"artist":return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(r,{label:"Artist Name",name:"title",value:h.title||"",onChange:f})});case"album":return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r,{label:"Titre",name:"title",value:h.title||"",onChange:f,required:!0}),(0,i.jsx)(u,{label:"Artiste",name:"artistId",options:[{id:"",title:"S\xe9lectionner..."},...g],value:h.artistId||"",onChange:f,required:!0}),(0,i.jsx)(r,{type:"file",label:"Couverture",name:"picture",onChange:y}),(0,i.jsx)(r,{type:"number",label:"Ann\xe9e de sortie",name:"releaseYear",value:h.releaseDate?new Date(h.releaseDate).getFullYear():"",onChange:e=>{p({...h,releaseDate:new Date(e.target.value,0,1)})},min:"1900",max:(new Date).getFullYear()}),(0,i.jsx)(r,{label:"Genre",name:"genre",value:h.genre||"",onChange:f})]});case"song":return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r,{label:"Song Title",name:"title",value:h.title||"",onChange:f}),(0,i.jsx)(u,{label:"Artist",name:"artistId",options:[{id:"",title:"S\xe9lectionner..."},...g],value:h.artistId||"",onChange:f}),(0,i.jsx)(u,{label:"Album",name:"albumId",options:[{id:"",title:"S\xe9lectionner..."},...j],value:h.albumId||"65a1a0ff45505f5fa98ae996",onChange:f}),"add"===b&&(0,i.jsx)(r,{type:"file",label:"Audio File",name:"audioFile",onChange:y})]});case"admin":return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r,{type:"email",label:"Email",name:"artist",value:h.artist||"",onChange:f}),(0,i.jsx)(r,{type:"text",label:"Username",name:"title",value:h.title||"",onChange:f}),(0,i.jsx)(r,{type:"text",label:"Mot de passe",name:"password",value:"",onChange:f})]});default:return(0,i.jsx)("p",{children:"Action impossible"})}})(),(0,i.jsx)(o,{type:"submit",label:"Valider"}),(0,i.jsx)(o,{type:"button",label:"Annuler",onClick:a})]})})})}):null},d=(0,l.memo)(c)}}]);
//# sourceMappingURL=54.fac6301f.chunk.js.map