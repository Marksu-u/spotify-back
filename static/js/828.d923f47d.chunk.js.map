{"version":3,"file":"static/js/828.d923f47d.chunk.js","mappings":"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","sources":["components/Card/index.js"],"sourcesContent":["import React, { useState, lazy } from 'react';\nimport PropTypes from 'prop-types';\nimport { apiService } from '../../services/apiService';\nimport { notificationService } from '../../services/notificationService';\nimport './index.css';\n\nconst Button = lazy(() => import('../Button'));\nconst Modal = lazy(() => import('../Modal'));\n\nconst Card = ({ type, data, onClick }) => {\n  const [isModalOpen, setModalOpen] = useState(false);\n  const [currentData, setCurrentData] = useState(null);\n  const [actionType, setActionType] = useState(null);\n\n  const handleCRUD = (actionType) => {\n    setCurrentData(data);\n    setModalOpen(true);\n    setActionType(actionType);\n  };\n\n  const handleModalClose = () => {\n    setModalOpen(false);\n    setCurrentData({});\n  };\n\n  const handleSubmit = async (updatedData, actionType) => {\n    await onSubmit(updatedData, actionType, type);\n    setModalOpen(false);\n  };\n\n  const onSubmit = async (updatedData, actionType, type) => {\n    try {\n      console.log('Card data :', updatedData);\n      console.log('Type Action :', actionType);\n      console.log('Type :', type);\n      if (actionType === 'update') {\n        switch (type) {\n          case 'artist':\n            // j'suis claqué j'vois pas pourquoi j'dois faire ça\n            const data = {\n              id: updatedData.id,\n              name: updatedData.title,\n            };\n            await apiService.editArtist(updatedData.id, data);\n            break;\n          case 'song':\n            await apiService.editAudio(updatedData.id, updatedData);\n            break;\n          case 'album':\n            await apiService.editAlbum(updatedData.id, updatedData);\n            break;\n        }\n        notificationService.notify('Mise à jour réussie', 'success');\n      } else if (actionType === 'delete') {\n        switch (type) {\n          case 'artist':\n            await apiService.deleteArtist(updatedData.id);\n            break;\n          case 'song':\n            await apiService.deleteSong(updatedData.id);\n            break;\n          case 'album':\n            await apiService.deleteAlbum(updatedData.id);\n            break;\n        }\n        notificationService.notify('Suppression réussie', 'success');\n      }\n    } catch (error) {\n      console.error(\"Erreur lors de l'action:\", error);\n      notificationService.notify(\"Erreur lors de l'action\", 'error');\n    }\n    setModalOpen(false);\n  };\n\n  const renderContent = () => {\n    switch (type) {\n      /* ------ ARTISTE ------ */\n      case 'artist':\n        return (\n          <div className=\"card\">\n            <div className=\"card-content\">\n              <div className=\"card-details\">{data.title}</div>\n            </div>\n          </div>\n        );\n\n      /* ------ AUDIO ------ */\n      case 'song':\n        return (\n          <div className=\"card\">\n            <div className=\"card-image\">\n              <img src={data.image} alt={data.album} />\n            </div>\n            <div className=\"card-content\">\n              <div className=\"card-title\">{data.title}</div>\n              <div className=\"card-details\">\n                <div>\n                  {data.artist} - {data.album}\n                </div>\n                <div>{data.date}</div>\n              </div>\n              <div className=\"card-genre\">\n                <div>{data.genre}</div>\n              </div>\n            </div>\n          </div>\n        );\n\n      /* ------ ALBUM ------ */\n      case 'album':\n        return (\n          <div className=\"card\">\n            <div className=\"card-image\">\n              <img src={data.image} alt={data.title} />\n            </div>\n            <div className=\"card-content\">\n              <div className=\"card-title\">{data.title}</div>\n              <div className=\"card-details\">\n                <div>\n                  {data.artist} {data.date}\n                </div>\n              </div>\n              <div className=\"card-genre\">\n                <div>Genre : {data.genre}</div>\n              </div>\n            </div>\n          </div>\n        );\n\n      /* ------ ADMIN ------ */\n      case 'admin':\n        return (\n          <div className=\"card\">\n            <div className=\"card-content\">\n              <div className=\"card-title\">{data.title}</div>\n              <div className=\"card-details\">\n                <div>{data.artist}</div>\n              </div>\n            </div>\n          </div>\n        );\n\n      /* ------ DEFAULT ------ */\n      default:\n        return <div>Données non disponibles</div>;\n    }\n  };\n\n  const renderCRUDButtons = () => (\n    <div className=\"button-container\">\n      <Button label=\"Modifier\" onClick={() => handleCRUD('update')} />\n      <Button label=\"Supprimer\" onClick={() => handleCRUD('delete')} />\n    </div>\n  );\n\n  return (\n    <div className=\"card\" onClick={onClick}>\n      {renderContent()}\n      {renderCRUDButtons()}\n      {isModalOpen && (\n        <Modal\n          isOpen={isModalOpen}\n          onClose={handleModalClose}\n          data={currentData}\n          onSubmit={handleSubmit}\n          actionType={actionType}\n          type={type}\n        />\n      )}\n    </div>\n  );\n};\n\nCard.propTypes = {\n  type: PropTypes.oneOf(['artist', 'song', 'album', 'admin']),\n  title: PropTypes.string,\n  image: PropTypes.string,\n  data: PropTypes.any,\n  onClick: PropTypes.func,\n};\n\nCard.defaultProps = {\n  onClick: () => {},\n};\n\nexport default Card;\n"],"names":["Button","lazy","Modal","Card","_ref","type","data","onClick","isModalOpen","setModalOpen","useState","currentData","setCurrentData","actionType","setActionType","handleCRUD","onSubmit","async","updatedData","console","log","id","name","title","apiService","editArtist","editAudio","editAlbum","notificationService","notify","deleteArtist","deleteSong","deleteAlbum","error","_jsxs","className","children","renderContent","_jsx","src","image","alt","album","artist","date","genre","label","isOpen","onClose","handleModalClose","defaultProps"],"sourceRoot":""}