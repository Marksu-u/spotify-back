{"version":3,"file":"static/js/54.c5565b12.chunk.js","mappings":"qKAKA,MAAMA,GAAQC,EAAAA,EAAAA,OAAK,IAAM,wCACnBC,GAASD,EAAAA,EAAAA,OAAK,IAAM,wCACpBE,GAASF,EAAAA,EAAAA,OAAK,IAAM,+BAEpBG,EAAQC,IAA4D,IAA3D,OAAEC,EAAM,QAAEC,EAAO,KAAEC,EAAI,SAAEC,EAAQ,KAAEC,EAAI,WAAEC,GAAYN,EAClE,MAAOO,EAAUC,IAAeC,EAAAA,EAAAA,UAASN,IAClCO,EAASC,IAAcF,EAAAA,EAAAA,UAAS,KAChCG,EAAQC,IAAaJ,EAAAA,EAAAA,UAAS,KAErCK,EAAAA,EAAAA,YAAU,KAENN,EADiB,QAAfF,EACU,CAAC,EAEDH,EACd,GACC,CAACA,EAAMG,KAEVQ,EAAAA,EAAAA,YAAU,KAeaC,WACnB,IACE,MACMC,SADuBC,EAAAA,EAAWC,cACEC,KAAKC,IACtC,CACLC,GAAID,EAAOE,IACXC,MAAOH,EAAOI,SAGlBb,EAAWK,EACb,CAAE,MAAOS,GACPC,QAAQD,MAAMA,EAChB,GAEFE,GA5BoBZ,WAClB,IACE,MACMa,SADsBX,EAAAA,EAAWY,aACCV,KAAKW,IACpC,CACLT,GAAIS,EAAMR,IACVC,MAAOO,EAAMP,UAGjBV,EAAUe,EACZ,CAAE,MAAOH,GACPC,QAAQD,MAAMA,EAChB,GAiBFM,EAAa,GACZ,IAEH,MAAMC,EAAgBC,IACpB,MAAM,KAAET,EAAI,MAAEU,GAAUD,EAAEE,OAC1B3B,GAAa4B,IAAQ,IAChBA,EACH,CAACZ,GAAOU,KACP,EAGCG,EAAoBJ,IACxB,MAAM,KAAET,EAAI,MAAEc,GAAUL,EAAEE,OAC1B3B,GAAa4B,IAAQ,IAChBA,EACH,CAACZ,GAAOc,EAAM,MACb,EA2GL,OAAKrC,GAGHsC,EAAAA,EAAAA,KAACC,EAAAA,SAAQ,CAACC,UAAUF,EAAAA,EAAAA,KAAA,OAAAG,SAAK,6BAA+BA,UACtDH,EAAAA,EAAAA,KAAA,OAAKI,UAAU,iBAAgBD,UAC7BH,EAAAA,EAAAA,KAAA,OAAKI,UAAU,gBAAeD,UAC5BE,EAAAA,EAAAA,MAAA,QAAMxC,SA9GQ6B,IACpBA,EAAEY,iBACFzC,EAASG,EAAUD,EAAYD,GAC5ByC,MAAK,KACJ5C,GAAS,IAEV6C,OAAOtB,IACNC,QAAQD,MAAM,iCAAkCA,EAAM,GACtD,EAsG+BiB,SAAA,CAnGfM,MACpB,OAAQ3C,GACN,IAAK,SACH,OACEkC,EAAAA,EAAAA,KAAAU,EAAAA,SAAA,CAAAP,UACEH,EAAAA,EAAAA,KAAC5C,EAAK,CACJuD,MAAM,cACN1B,KAAK,QACLU,MAAO3B,EAASgB,OAAS,GACzB4B,SAAUnB,MAIlB,IAAK,QACH,OACEY,EAAAA,EAAAA,MAAAK,EAAAA,SAAA,CAAAP,SAAA,EACEH,EAAAA,EAAAA,KAAC5C,EAAK,CACJuD,MAAM,cACN1B,KAAK,QACLU,MAAO3B,EAASgB,OAAS,GACzB4B,SAAUnB,KAEZO,EAAAA,EAAAA,KAACzC,EAAM,CACLoD,MAAM,SACN1B,KAAK,WACL4B,QAAS1C,EACTwB,MAAO3B,EAAS8C,UAAY,GAC5BF,SAAUnB,KAEZO,EAAAA,EAAAA,KAAC5C,EAAK,CACJuD,MAAM,QACN1B,KAAK,QACLU,MAAO3B,EAAS+C,OAAS,GACzBH,SAAUnB,KAEZO,EAAAA,EAAAA,KAAC5C,EAAK,CACJU,KAAK,OACL6C,MAAM,cACN1B,KAAK,aACL2B,SAAUd,OAIlB,IAAK,OACH,OACEO,EAAAA,EAAAA,MAAAK,EAAAA,SAAA,CAAAP,SAAA,EACEH,EAAAA,EAAAA,KAAC5C,EAAK,CACJuD,MAAM,aACN1B,KAAK,QACLU,MAAO3B,EAASgB,OAAS,GACzB4B,SAAUnB,KAEZO,EAAAA,EAAAA,KAACzC,EAAM,CACLoD,MAAM,SACN1B,KAAK,WACL4B,QAAS1C,EACTwB,MAAO3B,EAAS8C,UAAY,GAC5BF,SAAUnB,KAEZO,EAAAA,EAAAA,KAACzC,EAAM,CACLoD,MAAM,QACN1B,KAAK,UACL4B,QAASxC,EACTsB,MAAO3B,EAASgD,SAAW,GAC3BJ,SAAUnB,IAEI,QAAf1B,IACCiC,EAAAA,EAAAA,KAAC5C,EAAK,CACJU,KAAK,OACL6C,MAAM,aACN1B,KAAK,YACL2B,SAAUd,OAKpB,IAAK,QACH,OACEE,EAAAA,EAAAA,KAAAU,EAAAA,SAAA,CAAAP,UACEH,EAAAA,EAAAA,KAAC5C,EAAK,CACJU,KAAK,QACL6C,MAAM,cACN1B,KAAK,QACLU,MAAO3B,EAASa,QAAU,GAC1B+B,SAAUnB,MAIlB,QACE,OAAOO,EAAAA,EAAAA,KAAA,KAAAG,SAAG,iBACd,EAUSM,IACDT,EAAAA,EAAAA,KAAC1C,EAAM,CAACQ,KAAK,SAAS6C,MAAM,aAC5BX,EAAAA,EAAAA,KAAC1C,EAAM,CAACQ,KAAK,SAAS6C,MAAM,UAAUM,QAAStD,aATrC,IAaP,EAaf,GAAeuD,EAAAA,EAAAA,MAAK1D,E","sources":["components/Modal/index.js"],"sourcesContent":["import React, { Suspense, useState, useEffect, lazy, memo } from 'react';\nimport PropTypes from 'prop-types';\nimport { apiService } from '../../services/apiService';\nimport './index.css';\n\nconst Input = lazy(() => import('../Input'));\nconst Button = lazy(() => import('../Button'));\nconst Select = lazy(() => import('../Select'));\n\nconst Modal = ({ isOpen, onClose, data, onSubmit, type, actionType }) => {\n  const [formData, setFormData] = useState(data);\n  const [artists, setArtists] = useState([]);\n  const [albums, setAlbums] = useState([]);\n\n  useEffect(() => {\n    if (actionType === 'add') {\n      setFormData({});\n    } else {\n      setFormData(data);\n    }\n  }, [data, actionType]);\n\n  useEffect(() => {\n    const fetchAlbums = async () => {\n      try {\n        const fetchedAlbums = await apiService.getAlbums();\n        const transformedAlbums = fetchedAlbums.map((album) => {\n          return {\n            id: album._id,\n            title: album.title,\n          };\n        });\n        setAlbums(transformedAlbums);\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    const fetchArtists = async () => {\n      try {\n        const fetchedArtists = await apiService.getArtists();\n        const transformedArtists = fetchedArtists.map((artist) => {\n          return {\n            id: artist._id,\n            title: artist.name,\n          };\n        });\n        setArtists(transformedArtists);\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    fetchArtists();\n    fetchAlbums();\n  }, []);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prevData) => ({\n      ...prevData,\n      [name]: value,\n    }));\n  };\n\n  const handleChangeFile = (e) => {\n    const { name, files } = e.target;\n    setFormData((prevData) => ({\n      ...prevData,\n      [name]: files[0],\n    }));\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onSubmit(formData, actionType, type)\n      .then(() => {\n        onClose();\n      })\n      .catch((error) => {\n        console.error('Erreur lors de la soumission :', error);\n      });\n  };\n\n  const renderContent = () => {\n    switch (type) {\n      case 'artist':\n        return (\n          <>\n            <Input\n              label=\"Artist Name\"\n              name=\"title\"\n              value={formData.title || ''}\n              onChange={handleChange}\n            />\n          </>\n        );\n      case 'album':\n        return (\n          <>\n            <Input\n              label=\"Album Title\"\n              name=\"title\"\n              value={formData.title || ''}\n              onChange={handleChange}\n            />\n            <Select\n              label=\"Artist\"\n              name=\"artistId\"\n              options={artists}\n              value={formData.artistId || ''}\n              onChange={handleChange}\n            />\n            <Input\n              label=\"Genre\"\n              name=\"genre\"\n              value={formData.genre || ''}\n              onChange={handleChange}\n            />\n            <Input\n              type=\"file\"\n              label=\"Album Image\"\n              name=\"albumImage\"\n              onChange={handleChangeFile}\n            />\n          </>\n        );\n      case 'song':\n        return (\n          <>\n            <Input\n              label=\"Song Title\"\n              name=\"title\"\n              value={formData.title || ''}\n              onChange={handleChange}\n            />\n            <Select\n              label=\"Artist\"\n              name=\"artistId\"\n              options={artists}\n              value={formData.artistId || ''}\n              onChange={handleChange}\n            />\n            <Select\n              label=\"Album\"\n              name=\"albumId\"\n              options={albums}\n              value={formData.albumId || ''}\n              onChange={handleChange}\n            />\n            {actionType === 'add' && (\n              <Input\n                type=\"file\"\n                label=\"Audio File\"\n                name=\"audioFile\"\n                onChange={handleChangeFile}\n              />\n            )}\n          </>\n        );\n      case 'admin':\n        return (\n          <>\n            <Input\n              type=\"email\"\n              label=\"Admin email\"\n              name=\"email\"\n              value={formData.artist || ''}\n              onChange={handleChange}\n            />\n          </>\n        );\n      default:\n        return <p>Unknown type</p>;\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <Suspense fallback={<div>Chargement des audios...</div>}>\n      <div className=\"modal-backdrop\">\n        <div className=\"modal-content\">\n          <form onSubmit={handleSubmit}>\n            {renderContent()}\n            <Button type=\"submit\" label=\"Valider\" />\n            <Button type=\"button\" label=\"Annuler\" onClick={onClose} />\n          </form>\n        </div>\n      </div>\n    </Suspense>\n  );\n};\n\nModal.propTypes = {\n  isOpen: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  data: PropTypes.object,\n  onSubmit: PropTypes.func.isRequired,\n  type: PropTypes.oneOf(['artist', 'song', 'album']).isRequired,\n  actionType: PropTypes.oneOf(['update', 'delete', 'add']).isRequired,\n};\n\nexport default memo(Modal);\n"],"names":["Input","lazy","Button","Select","Modal","_ref","isOpen","onClose","data","onSubmit","type","actionType","formData","setFormData","useState","artists","setArtists","albums","setAlbums","useEffect","async","transformedArtists","apiService","getArtists","map","artist","id","_id","title","name","error","console","fetchArtists","transformedAlbums","getAlbums","album","fetchAlbums","handleChange","e","value","target","prevData","handleChangeFile","files","_jsx","Suspense","fallback","children","className","_jsxs","preventDefault","then","catch","renderContent","_Fragment","label","onChange","options","artistId","genre","albumId","onClick","memo"],"sourceRoot":""}