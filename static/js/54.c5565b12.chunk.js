"use strict";(self.webpackChunkspotify_back=self.webpackChunkspotify_back||[]).push([[54],{54:(e,a,t)=>{t.r(a),t.d(a,{default:()=>c});var n=t(791),l=t(183),s=t(184);const i=(0,n.lazy)((()=>Promise.resolve().then(t.bind(t,437)))),r=(0,n.lazy)((()=>Promise.resolve().then(t.bind(t,321)))),o=(0,n.lazy)((()=>t.e(457).then(t.bind(t,457)))),m=e=>{let{isOpen:a,onClose:t,data:m,onSubmit:c,type:u,actionType:d}=e;const[b,h]=(0,n.useState)(m),[g,p]=(0,n.useState)([]),[j,x]=(0,n.useState)([]);(0,n.useEffect)((()=>{h("add"===d?{}:m)}),[m,d]),(0,n.useEffect)((()=>{(async()=>{try{const e=(await l.E.getArtists()).map((e=>({id:e._id,title:e.name})));p(e)}catch(e){console.error(e)}})(),(async()=>{try{const e=(await l.E.getAlbums()).map((e=>({id:e._id,title:e.title})));x(e)}catch(e){console.error(e)}})()}),[]);const y=e=>{const{name:a,value:t}=e.target;h((e=>({...e,[a]:t})))},f=e=>{const{name:a,files:t}=e.target;h((e=>({...e,[a]:t[0]})))};return a?(0,s.jsx)(n.Suspense,{fallback:(0,s.jsx)("div",{children:"Chargement des audios..."}),children:(0,s.jsx)("div",{className:"modal-backdrop",children:(0,s.jsx)("div",{className:"modal-content",children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),c(b,d,u).then((()=>{t()})).catch((e=>{console.error("Erreur lors de la soumission :",e)}))},children:[(()=>{switch(u){case"artist":return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(i,{label:"Artist Name",name:"title",value:b.title||"",onChange:y})});case"album":return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i,{label:"Album Title",name:"title",value:b.title||"",onChange:y}),(0,s.jsx)(o,{label:"Artist",name:"artistId",options:g,value:b.artistId||"",onChange:y}),(0,s.jsx)(i,{label:"Genre",name:"genre",value:b.genre||"",onChange:y}),(0,s.jsx)(i,{type:"file",label:"Album Image",name:"albumImage",onChange:f})]});case"song":return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i,{label:"Song Title",name:"title",value:b.title||"",onChange:y}),(0,s.jsx)(o,{label:"Artist",name:"artistId",options:g,value:b.artistId||"",onChange:y}),(0,s.jsx)(o,{label:"Album",name:"albumId",options:j,value:b.albumId||"",onChange:y}),"add"===d&&(0,s.jsx)(i,{type:"file",label:"Audio File",name:"audioFile",onChange:f})]});case"admin":return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(i,{type:"email",label:"Admin email",name:"email",value:b.artist||"",onChange:y})});default:return(0,s.jsx)("p",{children:"Unknown type"})}})(),(0,s.jsx)(r,{type:"submit",label:"Valider"}),(0,s.jsx)(r,{type:"button",label:"Annuler",onClick:t})]})})})}):null},c=(0,n.memo)(m)}}]);
//# sourceMappingURL=54.c5565b12.chunk.js.map